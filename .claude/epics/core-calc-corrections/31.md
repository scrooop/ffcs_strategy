---
name: Simplify ATM FF Computation (Single FF)
status: open
created: 2025-10-20T04:35:49Z
updated: 2025-10-20T04:47:03Z
github: https://github.com/scrooop/ffcs_strategy/issues/31
depends_on: [28]
parallel: false
conflicts_with: [28, 24]
---

# Task 004: Simplify ATM FF Computation (Single FF)

## Description

Remove dual call_ff/put_ff calculation for ATM structure. Compute single `atm_ff` using IV from 50Δ strike. Update gating logic to filter on `atm_ff >= threshold`.

## Acceptance Criteria

- [ ] Remove separate call_ff/put_ff computation for ATM structure in scan loop
- [ ] Implement single `atm_ff` calculation using 50Δ strike IV
- [ ] Update gating logic: filter on `atm_ff >= threshold` (not combined_ff)
- [ ] Prepare ATM-specific CSV columns: atm_ff, atm_delta, atm_iv_front, atm_iv_back, atm_fwd_iv
- [ ] Remove call_ff, put_ff, combined_ff columns from ATM rows
- [ ] Use call IV from 50Δ strike (or average of call/put IV at that strike)
- [ ] Update sorting logic: ATM rows sort by atm_ff descending

## Technical Details

- **File:** scripts/ff_tastytrade_scanner.py
- **Scan loop:** ATM structure branch (~lines 600-700, estimate)
- **Forward variance/IV calculation functions:** Unchanged (already correct)
- **CSV output structure changes:** Coordinate with Task 008

## Dependencies

- Task 003 (50Δ strike selection provides correct anchor)

## Effort Estimate

- **Size:** M
- **Hours:** 5-6
- **Parallel:** false (conflicts with Task 003, 008)

## Definition of Done

- [ ] Single atm_ff calculation implemented
- [ ] Gating logic updated
- [ ] ATM CSV columns prepared
- [ ] Sorting by atm_ff working
- [ ] Integration tests passing
