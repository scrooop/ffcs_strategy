---
name: Integration Testing & Validation
status: open
created: 2025-10-19T08:51:48Z
updated: 2025-10-19T08:51:48Z
last_sync: 2025-10-19T18:19:57Zgithub: [Will be updated when synced to GitHub]
depends_on: [2, 3, 4, 5, 6, 7, 8]
parallel: false
conflicts_with: []
---

# Task: Integration Testing & Validation

## Description
Perform comprehensive end-to-end testing with real market data to validate all features work correctly, meet performance benchmarks, and handle edge cases gracefully. Make go/no-go decision on X-earn IV feature.

## Acceptance Criteria
- [ ] Test 1: Earnings filtering accuracy verified (10 symbols)
- [ ] Test 2: Liquidity threshold validation completed (spot-check mapping)
- [ ] Test 3: Double calendar strike selection validated (delta within tolerance)
- [ ] Test 4: X-earn IV functionality tested (decision: ship or defer)
- [ ] Test 5: Performance benchmarks met (10 symbols ≤30s, 20 symbols ≤60s)
- [ ] All edge cases handled gracefully (no crashes)
- [ ] CSV output validated against schema

## Technical Details

**Test Suite (from PRD Validation Plan):**

**Test 1: Earnings Filtering Accuracy**
```bash
# Scan symbols with known upcoming earnings
python scripts/ff_tastytrade_scanner.py --tickers AAPL TSLA NVDA --pairs 30-60 --show-earnings-conflicts

# Verify:
# - Scanner skips positions spanning earnings
# - --show-earnings-conflicts reveals filtered positions
# - Manual check: Compare to tastytrade platform earnings dates
```

**Test 2: Liquidity Threshold Validation**
```bash
# Scan 20 symbols with liquidity filter
python scripts/ff_tastytrade_scanner.py --tickers SPY QQQ AAPL TSLA NVDA META AMZN GOOGL MSFT AMD --min-liquidity-rating 3 --csv-out liquidity_test.csv

# Verify:
# - No symbols with rating <3 in output
# - Spot-check 5 symbols: rating vs actual volume on tastytrade
# - Document mapping: rating N ≈ X contracts/day
```

**Test 3: Double Calendar Strike Selection**
```bash
# Scan SPY with double calendar
python scripts/ff_tastytrade_scanner.py --tickers SPY --pairs 30-60 --structure double

# Verify:
# - Call strike has delta ~0.35 (±0.05)
# - Put strike has delta ~-0.35 (±0.05)
# - Manual FF calculation matches scanner output
```

**Test 4: X-earn IV Functionality**
```bash
# Test X-earn IV availability
python scripts/ff_tastytrade_scanner.py --tickers SPY QQQ AAPL TSLA NVDA --pairs 30-60 --use-xearn-iv --csv-out xearn_test.csv

# Verify:
# - Check iv_source column in CSV
# - If "xearn" appears: validate IV values differ from Greeks
# - If all "greeks": X-earn IV unavailable → defer to v2.1
# - Decision: Ship feature or defer?
```

**Test 5: Performance Benchmark**
```bash
# 10-symbol scan
time python scripts/ff_tastytrade_scanner.py --tickers SPY QQQ AAPL TSLA NVDA META AMZN GOOGL MSFT AMD --pairs 30-60 30-90 60-90 --structure both
# Target: ≤30 seconds

# 20-symbol scan
time python scripts/ff_tastytrade_scanner.py --tickers [20 symbols] --pairs 30-60 30-90 60-90 --structure both
# Target: ≤60 seconds
```

**Edge Cases to Test:**
- Missing earnings date (should log warning, proceed)
- Missing liquidity rating (should log warning, proceed)
- Greeks timeout (should skip symbol, continue)
- No strikes within delta tolerance (should log warning, skip double calendar)
- Empty option chain (should skip symbol, continue)

**Files Affected:**
- None (testing only)
- Create test log: `.claude/epics/ff-scanner-v2/test_results.md`

**Key Considerations:**
- Use production tastytrade environment (sandbox insufficient)
- Document all test results for future reference
- X-earn IV decision is critical path item

## Dependencies
- [ ] Tasks 001-007 completed (all features implemented)

## Effort Estimate
- Size: M
- Hours: 2-3 hours
- Parallel: false (requires all other tasks)

## Definition of Done
- [ ] All 5 tests executed and documented
- [ ] Performance benchmarks met (or issues identified)
- [ ] X-earn IV go/no-go decision made and documented
- [ ] Edge case handling verified (no crashes)
- [ ] Test results logged in test_results.md
- [ ] Issues found are either fixed or documented for v2.1
