---
name: Reorder CSV Columns (Trading-Focused Layout)
status: open
created: 2025-10-20T17:48:36Z
updated: 2025-10-20T18:23:15Z
github: https://github.com/scrooop/ffcs_strategy/issues/42
depends_on: [41]
parallel: false
conflicts_with: [41]
---

# Task: Reorder CSV Columns (Trading-Focused Layout)

## Description

Reorder CSV columns to group related fields together: Metadata → Expirations/Strikes → FF Metrics → IV Detail → Quality Filters. Move FF columns closer to right side (after strikes/expirations) for easier visual scanning when placing trades.

**Priority:** MEDIUM (Phase 3 - CSV Schema Refactor)

**Depends On:** Task #41 must be complete (unified column schema implemented)

## Acceptance Criteria

- [ ] Columns grouped logically: Metadata → Expirations/Strikes → FF Metrics → IV Detail → Quality Filters
- [ ] FF columns (`ff`, `put_ff`, `min_ff`, `combined_ff`) positioned after strikes/expirations
- [ ] Strike/expiration columns grouped together (easy to find trading parameters)
- [ ] CSV still reads correctly in Excel/pandas
- [ ] Column order documented in CLAUDE.md (Task #43)

## Technical Details

### Files to Modify
- `scripts/ff_tastytrade_scanner.py`:
  - Reorder CSV_COLUMNS list (around line 1851-1875)
  - No changes to row population logic (just column order)

### Implementation Approach

**Current Order (v3.0 from Task #41):**
```python
CSV_COLUMNS = [
    # Metadata (4)
    "timestamp", "symbol", "structure", "spot_price",
    # Expirations (4)
    "front_dte", "back_dte", "front_expiry", "back_expiry",
    # Strikes/Deltas (4)
    "strike", "put_strike", "delta", "put_delta",
    # FF Metrics (4)
    "ff", "put_ff", "min_ff", "combined_ff",
    # IV Detail (6)
    "call_front_iv", "call_back_iv", "call_fwd_iv",
    "put_front_iv", "put_back_iv", "put_fwd_iv",
    # IV Sources (4)
    "iv_source_call_front", "iv_source_call_back",
    "iv_source_put_front", "iv_source_put_back",
    # Quality Filters (6)
    "earnings_conflict", "earnings_date", "option_volume_today",
    "liq_rating", "earnings_source", "skip_reason"
]
```

**New Order (Trading-Focused, still 32 columns):**
```python
CSV_COLUMNS = [
    # Metadata (4) - UNCHANGED
    "timestamp", "symbol", "structure", "spot_price",
    # Trading Parameters (12) - GROUPED: Expirations + Strikes + FF
    "front_dte", "back_dte", "front_expiry", "back_expiry",
    "strike", "put_strike", "delta", "put_delta",
    "ff", "put_ff", "min_ff", "combined_ff",
    # IV Detail (10) - IVs + Sources grouped together
    "call_front_iv", "call_back_iv", "call_fwd_iv",
    "put_front_iv", "put_back_iv", "put_fwd_iv",
    "iv_source_call_front", "iv_source_call_back",
    "iv_source_put_front", "iv_source_put_back",
    # Quality Filters (6) - UNCHANGED
    "earnings_conflict", "earnings_date", "option_volume_today",
    "liq_rating", "earnings_source", "skip_reason"
]
```

**Rationale:**
- Columns 1-4: Identity (what symbol, when scanned)
- Columns 5-16: Trading parameters (dates, strikes, deltas, FF) - all info needed to place trade
- Columns 17-26: IV detail (technical data for analysis)
- Columns 27-32: Quality filters (why filtered/skipped)

### Visual Layout

**User Request:** "Move FF values closer to right of table, along with expiration dates and strikes"

**Result:** Columns 5-16 contain all trading info in one block (DTEs, expirations, strikes, deltas, FF)

### Key Considerations
- Column order change only (no logic changes)
- Row dict population unchanged (Task #41 handles that)
- Maintain 32 columns total
- Easy visual scan: symbol → strikes/expirations → FF → quality filters

## Dependencies

**Internal:**
- [x] Task #41 (CSV Schema Refactor) must be complete
- [ ] Conflicts with Task #41 (same CSV_COLUMNS list)

## Effort Estimate

- **Size:** XS (Extra Small)
- **Hours:** 1-2 hours
- **Parallel:** false (conflicts with task 41)

### Breakdown:
- Reorder CSV_COLUMNS list: 0.5 hour
- Test CSV readability: 0.5 hour
- Verify Excel/pandas compatibility: 0.5-1 hour

## Definition of Done

- [ ] CSV_COLUMNS list reordered (trading-focused layout)
- [ ] FF columns (9-12) appear after strikes/expirations (5-8)
- [ ] Test CSV opens correctly in Excel
- [ ] Test pandas reads CSV with correct column order
- [ ] Column order visually intuitive (metadata → trading params → detail → filters)
- [ ] No logic changes (only column order)
