# PRD: reopen issue of IV type

- add flag --IV-ex-earn that overrides the default greeks-based IV and uses ex-earn IV instead


# PRD improve-csv-output

These columns:
atm_strike	atm_delta	atm_ff	atm_iv_front	atm_iv_back	atm_fwd_iv	atm_iv_source_front	atm_iv_source_back
are redundant and confusing since there are already these columns as well:
call_strike	put_strike	call_delta	put_delta	call_ff	put_ff
"atm" is always *EITHER* a call *OR* a put -- it can't be anything else.

- Should these columns in the CSV be removed entirely?:
min_ff	combined_ff

- These columns are empty:
call_fwd_iv	put_front_iv	put_back_iv	put_fwd_iv

- Add --liquidity_rating argument so the user can set the minimum liquidity_rating threshold to something other than the default ≥ 3, e.g. "--liquidity_rating 2" sets the threshold to liquidity_rating ≥ 2.


# PRD improve-terminal-output

- print yfinance HTTP Error 404 messages gracefully/minimally
- implement logging (tee)
- make nice terminal output formatting (spacing, real-time progress percentage?)
- print every symbol as it is processed?
- clean up horrendous terminal output, e.g.:

2025-10-20 02:45:43,720 - __main__ - WARNING - ABT 30DTE: Greeks IV missing for call, using ex-earn fallback
2025-10-20 02:45:43,720 - __main__ - WARNING - ABT 30DTE: Greeks IV missing for put, using ex-earn fallback
2025-10-20 02:45:43,720 - __main__ - WARNING - ABT 60DTE: Greeks IV missing for call, using ex-earn fallback
2025-10-20 02:45:43,720 - __main__ - WARNING - ABT 60DTE: Greeks IV missing for put, using ex-earn fallback
2025-10-20 02:45:43,720 - __main__ - WARNING - ABT 90DTE: Greeks IV missing for call, using ex-earn fallback
2025-10-20 02:45:43,720 - __main__ - WARNING - ABT 90DTE: Greeks IV missing for put, using ex-earn fallback

2025-10-20 02:36:23,117 - yfinance - ERROR - HTTP Error 404: {"quoteSummary":{"result":null,"error":{"code":"Not Found","description":"No fundamentals data found for symbol: JEPI"}}}
2025-10-20 02:36:24,147 - yfinance - ERROR - JEPI: No earnings dates found, symbol may be delisted
[INFO] JEPI: No earnings data available from any source (no earnings to avoid)
2025-10-20 02:36:24,480 - yfinance - ERROR - HTTP Error 404: {"quoteSummary":{"result":null,"error":{"code":"Not Found","description":"Quote not found for symbol: PARA"}}}
[INFO] PARA: Most recent earnings 2025-07-31 (81 days ago, from TastyTrade)
Earnings pre-filter: 55 → 3 passed (52 filtered)
  Cache hits: 53 | Fresh fetches: 2
  Earnings check completed in 2.7s

[FILTERED] FUL: Liquidity rating 2 < 3
[FILTERED] GALT: Earnings on 2025-11-13 conflicts with back expiry 2026-01-16
2025-10-20 04:44:41,817 - __main__ - INFO - GBCI: Liquidity rating 1 < 3
[FILTERED] GBCI: Liquidity rating 1 < 3
[WARN] Could not get market data for GEFB: No data present in response: {}, skipping.
[WARN] Could not get market data for GOGL: No data present in response: {}, skipping.
2025-10-20 04:44:43,637 - __main__ - INFO - GSBC: Liquidity rating 1 < 3
[FILTERED] GSBC: Liquidity rating 1 < 3
[WARN] Could not get market data for GTXI: No data present in response: {}, skipping.
[WARN] Could not get market data for HEES: No data present in response: {}, skipping.
[WARN] No option chain for HIFS, skipping.
2025-10-20 04:44:46,044 - __main__ - INFO - HWC: Liquidity rating 2 < 3
[FILTERED] HWC: Liquidity rating 2 < 3
